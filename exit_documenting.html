<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at Sep 7, 2013 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>hyphenType - </title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20130907" />
    <meta http-equiv="Content-Language" content="en" />
        
  </head>
  <body class="composite">
    <div id="banner">
                  <a href="index.html" id="bannerLeft">
                                                <img src="images/hyphenTypeLogo.png" alt="$alt" />
                </a>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
        
                <div class="xleft">
        <span id="publishDate">Last Published: 2013-09-07</span>
                  &nbsp;| <span id="projectVersion">Version: 0.1</span>
                          |                           <a href="index.html" title="Getting started">Getting started</a>
                &gt;
                              <a href="download_build.html" title="Obtaining JAR">Obtaining JAR</a>
                &gt;
                              <a href="options_interfaces.html" title="Options Interfaces">Options Interfaces</a>
                &gt;
                              <a href="anatomy_main_class.html" title="Main Class">Main Class</a>
                &gt;
                              <a href="using_doc_formatters.html" title="Documentation Formatters">Documentation Formatters</a>
                &gt;
                              <a href="validators.html" title="Validators">Validators</a>
                &gt;
                              <a href="unit_testing.html" title="Unit Testing">Unit Testing</a>
                          </div>
            <div class="xright">        
        
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
        
                                <h5>Overview</h5>
                  <ul>
                  <li class="none">
                          <a href="index.html" title="About / Getting started">About / Getting started</a>
            </li>
                  <li class="none">
                          <a href="download_build.html" title="Download / Build">Download / Build</a>
            </li>
                                                                                                                                                                                                                                                      <li class="expanded">
                          <a href="basics.html" title="Basics">Basics</a>
                    <ul>
                      <li class="none">
                          <a href="options_interfaces.html" title="Options Interfaces">Options Interfaces</a>
            </li>
                      <li class="none">
                          <a href="anatomy_main_class.html" title="Anatomy of a Main Class">Anatomy of a Main Class</a>
            </li>
                      <li class="none">
                          <a href="using_doc_formatters.html" title="Using Dcumentation Formatters">Using Dcumentation Formatters</a>
            </li>
                      <li class="none">
                          <a href="resource_bundles.html" title="Configuration from resource bundles">Configuration from resource bundles</a>
            </li>
                      <li class="none">
                          <a href="validators.html" title="Validators">Validators</a>
            </li>
                                                                                                    <li class="expanded">
                          <a href="exit.html" title="Exit Status Codes">Exit Status Codes</a>
                    <ul>
                      <li class="none">
            <strong>Documentation</strong>
          </li>
                      <li class="none">
                          <a href="exit_exceptions.html" title="Exceptions">Exceptions</a>
            </li>
              </ul>
        </li>
                      <li class="none">
                          <a href="unit_testing.html" title="Unit Testing">Unit Testing</a>
            </li>
                      <li class="none">
                          <a href="debugging.html" title="Debugging">Debugging</a>
            </li>
              </ul>
        </li>
                                                                                                        <li class="collapsed">
                          <a href="advanced_topics.html" title="Advanced Topics">Advanced Topics</a>
                  </li>
                                                                    <li class="collapsed">
                          <a href="examples.html" title="Examples / Cookbook">Examples / Cookbook</a>
                  </li>
                                                                    <li class="collapsed">
                          <a href="tips.html" title="Tips">Tips</a>
                  </li>
                  <li class="none">
                          <a href="faq.html" title="FAQ">FAQ</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                        <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                                                                                  <li class="collapsed">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
        
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>Documenting a status code<a name="Documenting_a_status_code"></a></h2><p>Documenting a status code means three different things:</p><ol style="list-style-type: lower-alpha"><li>The documentation you show to the end user telling him/her what each status code means.</li><li>The messages you show to the end user when your application terminates.</li><li>The documentation to developers that will use the status code or that will provide translations to the status code.</li></ol><p>The difference between a. and c. is very subtle. Although both explain the meaning of a exit status code constant, each is directed to a different person.</p><p>Think of the first kind of documentation as similar to a manual of a program. The end user should read this manual in his native language and all descriptions cannot be very technical or talk about the internals of the program. For example, this is the documentation the end user wants to see when he uses the option --help.</p><p>The third kind of documentation will only have one version (for instance, one in a lingua franca) for all developers to read. Think of this kind of documentation as similar to a technical blueprint. This documentation is similar to a javadocs in that it may be written in terms of the internal behavior of a status code. Also, just like javadocs, this documentation is never presented to the end user.</p><div class="section"><h3>(a. and b.) Documentation for the end user<a name="aa._and_b._Documentation_for_the_end_user"></a></h3><div class="section"><h4>message<a name="message"></a></h4><p>This property may contain locations for replacements to be added. The value of the &quot;message&quot; variable may refer to replacements using the standard of Formatter.format(String, Object...). The values of replacement objects ({0}, {1}, ...) depends on what caused the JVM or environment to terminate:</p><ol style="list-style-type: decimal"><li>Explicit call to Options.exit(Enum e, Object... obj) - The values of {0}, {1}, etc will be set to be the values of the array (second argument).</li><li>Explicit call to Options.exit(int i, Object... obj)) - Idem to the above.</li><li>Explicit call to Options.exit(Throwable) - {0} will be set to be Throwable.getLocalizedMessage() and {1} will be the string printed by calling Throwable.printStackTrace().</li><li>When this exit status constant catches an exception - Exit status constants may catch exceptions listed in the property ExitStatusConstant.catches(). Same behavior as in 3.</li></ol><p>The following table summarizes the description above:</p><table border="1" class="bodyTable"><caption>Values of replacements in each usage of the message property.</caption><tr class="a"><td align="left"></td><td align="left"><b>{0}</b></td><td align="left"><b>{1}</b></td><td align="left"><b>{2}</b></td><td align="left"><b>...</b></td><td align="left"><b>{n}</b></td></tr><tr class="b"><td align="left">1. Options.exit(Enum e, Object... obj)</td><td align="left">obj[0]</td><td align="left">obj[1]</td><td align="left">obj[2]</td><td align="left">...</td><td align="left">obj[n]</td></tr><tr class="a"><td align="left">2. Options.exit(int i, Object... obj)</td><td align="left">obj[0]</td><td align="left">obj[1]</td><td align="left">obj[2]</td><td align="left">...</td><td align="left">obj[n]</td></tr><tr class="b"><td align="left">3. Options.exit(Throwable t)</td><td align="left">t.getLocalizedMessage()</td><td align="left">t.printStackTrace()</td><td align="left">null</td><td align="left">...</td><td align="left">null</td></tr><tr class="a"><td align="left">4. catching throwable t</td><td align="left">t.getLocalizedMessage()</td><td align="left">t.printStackTrace()</td><td align="left">null</td><td align="left">...</td><td align="left">null</td></tr></table><p>Let us take a look at a simple example to illustrate this concept. Let us assume that the exit code is declared as follows:</p><div class="source"><pre>@ExitStatusConstant(message = &quot;Problem: {0}. Good bye.&quot;)
PROBLEM</pre></div><p>If we try to terminate the JVM using the following:</p><div class="source"><pre>options.exit(PROBLEM, &quot;Panic!&quot;);</pre></div><p>... the user will get the following in the terminal:</p><div class="source"><pre>Problem: Panic!. Good bye.</pre></div></div><div class="section"><h4>userDescription<a name="userDescription"></a></h4><p>Unlike the &quot;message&quot; property, this variable cannot receive replacement arguments such as {0}, {1}, ... Instead, the value of this property should be a static text that documents in what situations the status code is used. An example of value is &quot;This status code is issued whenever the application finds a lock file&quot;.</p></div><div class="section"><h4>Writing documentation<a name="Writing_documentation"></a></h4><p>Here we explain how to set the documentation for the end user. Both variables message and userDescription can be set the same way.</p><div class="section"><h5>Method 1: not doing anything<a name="Method_1:_not_doing_anything"></a></h5><p>If you do not provide any documentation about the exit codes, the documentation formatters should use the name of the enumeration constant along with the exit code number.</p><p>We say &quot;should&quot; instead of &quot;will&quot; because you can chose a documentation formatter shipped with hyphenType or even create your own. In other words, a documentation formatter is a standard, not an implementation. So it is possible, although extremely not desireable, that a documentation formatter behaves in a way that violates this standard.</p><p>For more details on how to create your own documentation formatter, please check <a href="#creating_documentation_formatters.html">Creating Documentation Formatters</a>.</p></div><div class="section"><h5>Method 2: adding the @ExitStatusDocumentation to the enumeration constants<a name="Method_2:_adding_the_ExitStatusDocumentation_to_the_enumeration_constants"></a></h5><p>If you add the @ExitStatusDocumentation to the enumeration constants, hyphenType will automatically use the value of this annotation as the text to document</p><div class="source"><pre>public enum ExitStatus implements StatusCode {

        @ExitStatusDocumentation(
            message = &quot;Program terminated OK.&quot;,
            userDescription = &quot;Correct termination.&quot;
        )
        A,
        
        @ExitStatusDocumentation(
            message = &quot;We had a problem caused by {0}.&quot;,
            userDescription = &quot;Termination with error.&quot;
        )
        B;
        
        @Override
        public void beforeExit(ExitStatusHelper helper) {
            // Not doing anything before exit.
        }
}</pre></div></div><div class="section"><h5>Method 3: adding translations to the resource bundle<a name="Method_3:_adding_translations_to_the_resource_bundle"></a></h5><p>Documenting a status code can also be done using the same resource bundle files used to document an options interface. If your options interface is called a.b.c.MyOpt, hyphenType will search the classpath for the file /a/b/c/MyOpt.properties (which contains the standard translations) and /a/b/c/MyOpt_langCode.properties, which contains the translations for a language whose code is langCode.</p><p>The keys should be the full name of each enumeration constant. For instance, the keys for the MyExitStatus above should be: org.hyphenType.tests.exit.MyExitStatus.A and org.hyphenType.tests.exit.MyExitStatus.B.</p><p>You can use an alias to avoid having to repeat the full enumeration name. So the default translation for MyExitStatus (MyOpt.properties) could be:</p><div class="source"><pre>alias.exitcode = org.hyphenType.tests.exit.MyExitStatus
alias.stdoc = org.hyphenType.exit.ExitStatusDocumentation
# When no exception happened
${exitcode}.A@${stdoc}.message = Program terminated OK.
${exitcode}.A@${stdoc}.userDescription = Correct termination.
# When some exception was thrown
${exitcode}.B@${stdoc}.message = We had a problem caused by {0}.
${exitcode}.B@${stdoc}.userDescription = Termination with error.</pre></div><p>Each status code constant X may have two entries in the resource bundles. The first entry (${exitcode}.X@${stdoc}.userDescription) is the explanation of what the status code means. This explanation should appear in the documentation of the command line interface. For instance, this is the documentation that should appear when the user calls &quot;command --help&quot;.</p><p>The second entry (exitcode.X@${stdoc}.message) is the message that is yield by the <a href="./apidocs/org/hyphenType/exit/ExitStatusHelper.html">ExitStatusHelper.getMessage()</a> method. Such message is formatted using the arguments passed to the <a href="./apidocs/org/hyphenType/datastructure/Options.html">Options.exit(T status)</a> method.</p><p>Beware that aliases should necessarily be the same across properties files. Therefore, if we have another file for documentation in Spanish, the file (MyOpt_sp.properties) should have the following structure:</p><div class="source"><pre>alias.exitcode = org.hyphenType.tests.exit.MyExitStatus
alias.stdoc = org.hyphenType.exit.ExitStatusDocumentation
# When no exception happened
${exitcode}.A@${stdoc}.message = Todo termino bien.
${exitcode}.A@${stdoc}.userDescription = &#xca;xito
# When some exception was thrown
${exitcode}.B@${stdoc}.message = {0} fue la causa de un problema.
${exitcode}.B@${stdoc}.userDescription = Fracaso</pre></div></div></div></div><div class="section"><h3>(c.) Documentation for developers<a name="ac._Documentation_for_developers"></a></h3><p>In order to explain what a documentation for developers is, let us go back to the examples above. In the previous section, we have shown two examples of resource bundles. Both resource bundles could have been generated by the RBGenerator. So the RBGenerator was in charge of creating an empty template such as:</p><div class="source"><pre>alias.exitcode = org.hyphenType.tests.exit.MyExitStatus
alias.stdoc = org.hyphenType.exit.ExitStatusDocumentation
# When no exception happened
${exitcode}.A@${stdoc}.message = 
${exitcode}.A@${stdoc}.userDescription = 
# When some exception was thrown
${exitcode}.B@${stdoc}.message = 
${exitcode}.B@${stdoc}.userDescription = </pre></div><p>Did you notice the comments before &quot;exitcode.A&quot; and &quot;exitcode.B&quot;? Where did those comments come from? They are the documentation for developers.</p><p>The message &quot;When no exception happened&quot; is target at developers, while &quot;Todo termino bien.&quot; is target at the end user who speaks Spanish. Here we are assuming that the lingua franca for developers is English. That is why &quot;When no exception happened&quot; is written in English.</p><p>So the next natural question could be how to attach this documentation to a status code. The answer is by simply decorating each status code constant with the org.hyphenType.documentation.Description annotation. If this annotation is present, the RBGenerator will use the value of this annotation as the contents of the comment before each status code value, as in the three examples.</p><p>Take a look at the source code of CanonicalExitCode for a simple example on how to use this annotation.</p><p>This annotation accepts the \n character to break lines, allowing for documentation formatting in multiple lines. For instance, if the documentation is declared as @Description(&quot;This is\nmy description.\nAnd this yet another line.&quot;), the generated output will be:</p><div class="source"><pre># This is
# my description.
# And this yet another line.</pre></div></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">Copyright &#169;                   2013.
          All Rights Reserved.      
        
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
