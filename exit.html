<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at Sep 7, 2013 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>hyphenType - </title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20130907" />
    <meta http-equiv="Content-Language" content="en" />
        
  </head>
  <body class="composite">
    <div id="banner">
                  <a href="index.html" id="bannerLeft">
                                                <img src="images/hyphenTypeLogo.png" alt="$alt" />
                </a>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
        
                <div class="xleft">
        <span id="publishDate">Last Published: 2013-09-07</span>
                  &nbsp;| <span id="projectVersion">Version: 0.1</span>
                          |                           <a href="index.html" title="Getting started">Getting started</a>
                &gt;
                              <a href="download_build.html" title="Obtaining JAR">Obtaining JAR</a>
                &gt;
                              <a href="options_interfaces.html" title="Options Interfaces">Options Interfaces</a>
                &gt;
                              <a href="anatomy_main_class.html" title="Main Class">Main Class</a>
                &gt;
                              <a href="using_doc_formatters.html" title="Documentation Formatters">Documentation Formatters</a>
                &gt;
                              <a href="validators.html" title="Validators">Validators</a>
                &gt;
                              <a href="unit_testing.html" title="Unit Testing">Unit Testing</a>
                          </div>
            <div class="xright">        
        
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
        
                                <h5>Overview</h5>
                  <ul>
                  <li class="none">
                          <a href="index.html" title="About/Getting started">About/Getting started</a>
            </li>
                  <li class="none">
                          <a href="download_build.html" title="Download/Build">Download/Build</a>
            </li>
                                                                                                                                                                                                                                                      <li class="expanded">
                          <a href="basics.html" title="Basics">Basics</a>
                    <ul>
                      <li class="none">
                          <a href="options_interfaces.html" title="Options Interfaces">Options Interfaces</a>
            </li>
                      <li class="none">
                          <a href="anatomy_main_class.html" title="Anatomy of a Main Class">Anatomy of a Main Class</a>
            </li>
                      <li class="none">
                          <a href="using_doc_formatters.html" title="Using Dcumentation Formatters">Using Dcumentation Formatters</a>
            </li>
                      <li class="none">
                          <a href="resource_bundles.html" title="Configuration from resource bundles">Configuration from resource bundles</a>
            </li>
                      <li class="none">
                          <a href="validators.html" title="Validators">Validators</a>
            </li>
                                                                                              <li class="expanded">
            <strong>Exit Status Codes</strong>
                  <ul>
                      <li class="none">
                          <a href="exit_documenting.html" title="Documentation">Documentation</a>
            </li>
                      <li class="none">
                          <a href="exit_exceptions.html" title="Exceptions">Exceptions</a>
            </li>
              </ul>
        </li>
                      <li class="none">
                          <a href="unit_testing.html" title="Unit Testing">Unit Testing</a>
            </li>
                      <li class="none">
                          <a href="debugging.html" title="Debugging">Debugging</a>
            </li>
              </ul>
        </li>
                                                                                                        <li class="collapsed">
                          <a href="advanced_topics.html" title="Advanced Topics">Advanced Topics</a>
                  </li>
                                                                    <li class="collapsed">
                          <a href="tips.html" title="Tips">Tips</a>
                  </li>
                  <li class="none">
                          <a href="faq.html" title="FAQ">FAQ</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                        <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                                                                                  <li class="collapsed">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
        
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>Exit status codes<a name="Exit_status_codes"></a></h2><p>When an application finishes, it releases a status code. This code is an integer number that can be then read by another process to determine in which conditions the application was terminated. In general, a status code equals to zero means the application was terminated as expected while a status code different from zero means that there was an error in the execution of the application.</p><p>Although this is the standard interpretation of a status code, each program is free to use whatever meaning for status codes. For instace, a program that aims at checking a certain condition to be either true or false may use the status code to give this information to a caller process.</p></div><div class="section"><h2>Status codes in hyphenType<a name="Status_codes_in_hyphenType"></a></h2><p>As we already saw, hyphenType can be used to wrap the execution of stand alone applications using the <a href="./apidocs/org/hyphenType/wrapper/StandAloneAppWrapper.html">StandAloneAppWrapper</a>. So it is natural to expect hyphenType to also provide some help with status codes.</p><p>Any application that uses hyphenType to parse command line arguments can deliver status codes by simply calling the traditional System.exit(statusCode). Everything will work just fine.</p><p>But we already saw that we can use documentation formatters to document how our application should be called. Wouldn't it be nice to have the documentation formatter also documenting the status codes as well? For this to work we need to tell hyphenType what are the status codes and what is the documentation text associated with each status code.</p><p>The following is a source code of an options interface that uses status codes:</p><div class="source"><pre>package org.hyphenType.tests.exit;

import org.hyphenType.datastructure.Options;
import org.hyphenType.datastructure.annotations.ArgumentsObject;
import org.hyphenType.datastructure.annotations.Option;
import org.hyphenType.datastructure.annotations.SimpleArgument;

@ArgumentsObject(statusCodeEnum = MyExitStatus.class)
public interface MyOptions extends Options&lt;MyExitStatus&gt; {

    @Option
    boolean x();
    
    @SimpleArgument
    String y();
}
</pre></div><p>And here is the source code of MyExitStatus:</p><div class="source"><pre>package org.hyphenType.tests.exit;

import org.hyphenType.exit.ExitStatusConstant;
import org.hyphenType.exit.ExitStatusHelper;
import org.hyphenType.exit.StatusCode;

public enum MyExitStatus implements StatusCode {

    @ExitStatusConstant(catches=IncompatibleClassChangeError.class, message = &quot;&quot;, userDescription = &quot;&quot;)
    A,
    @ExitStatusConstant(catches=IllegalArgumentException.class, message = &quot;&quot;, userDescription = &quot;&quot;)
    B;

    public int calls = 0;

    @Override
    public void beforeExit(ExitStatusHelper helper) {
        calls++;
        System.out.println(&quot;~~~&gt;&quot; + helper.getThrowable());
    }
}
</pre></div><p>As you can see, MyExitStatus appears twice in the source code of MyOptions.</p><p>First, it appears as the value of the statusCodeEnum property of the <a href="./apidocs/org/hyphenType/datastructure/annotations/ArgumentsObject.html">ArgumentsObject</a> annotation. This property serves for documentation purposes and for the <a href="./apidocs/org/hyphenType/optionprocessors/lib/BooleanValidatorEngine.BooleanValidator.html">BooleanValidator</a>. Whatever status code class you set the statusCodeEnum property to, the documentation will use this class when generating documentation.</p><p>Second, MyExitStatus appears as a generic parameter for the MyOptions interface. This parameter will specify the signature of <a href="./apidocs/org/hyphenType/datastructure/Options.html">Options.exit(T status)</a> as the type T.</p><div class="section"><h3>Why twice?<a name="Why_twice"></a></h3><p>One can make the reasonable question: why do I need to write MyExitStatus twice in the source code of MyOptions? Why not simply setting MyExitStatus as the generic parameter and let hyphenType read this parameter? Having two things that need to be necessarily always equal is not only confusing but also error prone.</p><p>The simple answer is: because this is not possible in Java. This impossibility has to do with the way generics were implemented in Java. Generics are simply a compilation-step check and are not available at runtime. This is called erasure.</p><p>As a result, this information is not available at runtime via reflection. That is why we need this information to be on the annotation, which can be easily read at runtime.</p><p>After resignation to this reality, one may ask why whould happen if one makes a mistake. In other words, what happens if statusCodeEnum is X.class, but my options interface extends Options&lt;Y&gt;, instead of Options&lt;X&gt;. In this case, the documentation and the <a href="./apidocs/org/hyphenType/optionprocessors/lib/BooleanValidatorEngine.BooleanValidator.html">BooleanValidator</a> will only match the reality if X and Y are identical.</p></div><div class="section"><h3>How to generate status codes?<a name="How_to_generate_status_codes"></a></h3><p>While the canonical way to generate status codes in Java is by calling System.exit(statusCode), using hyphenType you need to call opt.exit(statusCode) where opt is the arguments object and statusCode can be either an integer or an enumeration constant.</p></div><div class="section"><h3>What is the actual status code when I use an enumeration constant as the argument to exit?<a name="What_is_the_actual_status_code_when_I_use_an_enumeration_constant_as_the_argument_to_exit"></a></h3><p>Short answer: <b>the ordinal of the enumeration</b>.</p><p>Long answer: As we said before, status codes are always an integer, not a Java object. This is something the operating system is expecting from the running application. This is universal to any programming language and therefore Java needs to adhere to this standard. Whatever the status code your application generates to the JVM, the JVM will re-generate this status code to the operating system. In the example above, opt.exit(A) yields 0, while opt.exit(B) yields 1.</p></div></div><div class="section"><h2>Canonical Exit Code<a name="Canonical_Exit_Code"></a></h2><p>The <a href="./apidocs/org/hyphenType/exit/CanonicalExitCode.html">CanonicalExitCode</a> is the simplest possible exit code enumeration. It has only two constants: SUCCESS (code is 0), and ERROR (code is 1). If you do not choose any exit code in the statusCodeEnum property, hyphenType will assume this to be the exit code by default.</p></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">Copyright &#169;                   2013.
          All Rights Reserved.      
        
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
