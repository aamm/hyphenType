<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at Sep 7, 2013 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>hyphenType - </title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20130907" />
    <meta http-equiv="Content-Language" content="en" />
        
  </head>
  <body class="composite">
    <div id="banner">
                  <a href="index.html" id="bannerLeft">
                                                <img src="images/hyphenTypeLogo.png" alt="$alt" />
                </a>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
        
                <div class="xleft">
        <span id="publishDate">Last Published: 2013-09-07</span>
                  &nbsp;| <span id="projectVersion">Version: 0.1</span>
                          |                           <a href="index.html" title="Getting started">Getting started</a>
                &gt;
                              <a href="download_build.html" title="Obtaining JAR">Obtaining JAR</a>
                &gt;
                              <a href="options_interfaces.html" title="Options Interfaces">Options Interfaces</a>
                &gt;
                              <a href="anatomy_main_class.html" title="Main Class">Main Class</a>
                &gt;
                              <a href="using_doc_formatters.html" title="Documentation Formatters">Documentation Formatters</a>
                &gt;
                              <a href="validators.html" title="Validators">Validators</a>
                &gt;
                              <a href="unit_testing.html" title="Unit Testing">Unit Testing</a>
                          </div>
            <div class="xright">        
        
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
        
                                <h5>Overview</h5>
                  <ul>
                  <li class="none">
                          <a href="index.html" title="About/Getting started">About/Getting started</a>
            </li>
                  <li class="none">
                          <a href="download_build.html" title="Download/Build">Download/Build</a>
            </li>
                                                                                                                                                                                                                                                      <li class="expanded">
                          <a href="basics.html" title="Basics">Basics</a>
                    <ul>
                      <li class="none">
                          <a href="options_interfaces.html" title="Options Interfaces">Options Interfaces</a>
            </li>
                      <li class="none">
                          <a href="anatomy_main_class.html" title="Anatomy of a Main Class">Anatomy of a Main Class</a>
            </li>
                      <li class="none">
                          <a href="using_doc_formatters.html" title="Using Dcumentation Formatters">Using Dcumentation Formatters</a>
            </li>
                      <li class="none">
            <strong>Configuration from resource bundles</strong>
          </li>
                      <li class="none">
                          <a href="validators.html" title="Validators">Validators</a>
            </li>
                                                                                          <li class="collapsed">
                          <a href="exit.html" title="Exit Status Codes">Exit Status Codes</a>
                  </li>
                      <li class="none">
                          <a href="unit_testing.html" title="Unit Testing">Unit Testing</a>
            </li>
                      <li class="none">
                          <a href="debugging.html" title="Debugging">Debugging</a>
            </li>
              </ul>
        </li>
                                                                                                        <li class="collapsed">
                          <a href="advanced_topics.html" title="Advanced Topics">Advanced Topics</a>
                  </li>
                                                                    <li class="collapsed">
                          <a href="examples.html" title="Examples / Cookbook">Examples / Cookbook</a>
                  </li>
                                                                    <li class="collapsed">
                          <a href="tips.html" title="Tips">Tips</a>
                  </li>
                  <li class="none">
                          <a href="faq.html" title="FAQ">FAQ</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                        <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                                                                                  <li class="collapsed">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
        
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>Configuration from resource bundles<a name="Configuration_from_resource_bundles"></a></h2><p>Adding annotations to an options interface is a very easy way to tell hyphenType how to parse command line options. But these annotations can become hard to maintain, especially if you need to add lots of documentation to them.</p><p>A better solution is to have separated entities:</p><ol style="list-style-type: decimal"><li>The options interface - A Java interface with annotations, as we saw on previous sections.</li><li>A set of resource bundle files - Text files containing all text that will appear as the documentation for users. These files may also configure the behavior of the options interface. You can provide many of those files, one for each language you want to support.</li></ol><p>hyphenType is ready to overwrite any property of any annotation you add to the options interface using a resource bundle file.</p></div><div class="section"><h2>Example<a name="Example"></a></h2><p>Let us start by checking a very simple example.</p><div class="source"><pre>org.hyphenType.tests.exit.MyExitStatus.A = x 
org.hyphenType.tests.exit.MyExitStatus.A.message = y 
org.hyphenType.tests.exit.MyExitStatus.B = z
org.hyphenType.tests.exit.MyExitStatus.B.message = w </pre></div></div><div class="section"><h2>How resource bundles are read<a name="How_resource_bundles_are_read"></a></h2><div class="section"><h3>Resource bundle location<a name="Resource_bundle_location"></a></h3><p>The default location of the resource bundle is the same of the options interface. For instance, if the options interface is called a.b.c.MyOptions, hyphenType will search for a file called /a/b/c/MyOptions.properties where the root directory is the root of the classpath.</p><p>You can change the behavior of hyphenType make it load any other file as the resource bundle. This is set using the property resourceBundlesLocation in the @ArgumentsObject annotation.</p></div><div class="section"><h3>Resource bundle encoding<a name="Resource_bundle_encoding"></a></h3><p>The default encoding for resource bundles is UTF-8. Using UTF-8 as the default encoding is good to allow for simple editing of messages in languages that use characters out of the ASCII table.</p><p>You can set the encoding in the resourceBundlesEncoding property in the @ArgumentsObject annotation.</p></div></div><div class="section"><h2>Resource bundle syntax<a name="Resource_bundle_syntax"></a></h2><p>Configuration files are no more than resource bundle files with some extensions.</p><p>Standard Java resource bundle files have some limitations that keep them from fitting into hyphenType. The main limitations are:</p><ol style="list-style-type: decimal"><li>The lack of an alias to make property names short - As you may have already noticed, property keys in hyphenType tend to be quite long because they are based on class names. We need a way to keep property names short while using full class names to avoid collisions between names. </li><li>UTF-8 encoding - Standard Java resource bundles are not encoded at UFT-8. As a result, documentation in languages that uses anything not in the ASCII table need special editors or cumbersome translations to escaping formats.</li><li>Arrays - Sometimes we need to store arrays. For instance, the <a href="#a.siteapidocsorghyphenTypedatastructureannotationsOption.html">org.hyphenType.annotations.Option</a> annotation has the &quot;names&quot; property, which is an array of strings.</li></ol><p>Resource bundles are used in hyphenType to allow for programmers to change the way annotations are applied to the options interface and to its methods. There is a specific syntax to represent such configuration. The following code illustrates this syntax:</p><div class="source"><pre># Setting the value of the 'name' field of the
# ClassAnnotation annotation, which decorates the MyClass
# class
org.MyClass@my.package.ClassAnnotation.name = Name

# Setting the value of the 'x' field of the same annotation
org.MyClass@my.package.ClassAnnotation.x = 2

# Setting the value of the 'name' field of the the
# FieldAnnotation annotation, which is applied to the
# field1 field of the MyClass class. 
org.MyClass.field1@my.package.FieldAnnotation.name = X

# Setting the value of the 'name' field of the the
# MethodAnnotation annotation, which is applied to the
# method1 method of the MyClass class. 
org.MyClass.method1@my.package.MethodAnnotation.name = Y</pre></div><p>As you can see from the example above, setting the value of a field in a class is straightforward. All you need to do is to refer to the field and give it a value.</p><p>The @ sign means the application of a certain annotation.</p><div class="section"><h3>Assignment priority for annotation properties<a name="Assignment_priority_for_annotation_properties"></a></h3><p>Assume the following options interface:</p><div class="source"><pre>@MyAnnotation(
    p1 = &quot;a&quot;, // case A
    p2 = &quot;b&quot;,
    p3 = &quot;c&quot;
)
public interface MyOptions extends Options {

        // ...

}</pre></div><p>And the following configuration file:</p><div class="source"><pre># case B
MyAnnotation.p2 = &quot;B&quot;
MyAnnotation.p3 = &quot;C&quot;
# case C
MyOptions@MyAnnotation.p3 = &quot;3&quot;</pre></div><p>What will be the values of each of the annotation properties p1, p2, and p3? There is no question that the value of p1 is &quot;a&quot;, which we call case A. What about cases B and C? When an options interface is loaded by hyphenType, the values of each field are set using the following order:</p><ol style="list-style-type: upper-alpha"><li>Assignment in the explicit application of the annotation.</li><li>The value of an unbounded assignment.</li><li>The value of a bounded assignment.</li></ol><p>So the answer is that the value of p2 is &quot;B&quot; and the value of p3 is &quot;3&quot;. The string &quot;MyComplexOptions@MyAnnotation&quot; stands for the instance of MyAnnotation that decorates the MyComplexOptions class.</p><p>In order to identify an instance of an annotation, it is enough to say to which class, method, field, etc the annotation is attached to, since Java does not allow for the same annotation to be applied more than once to the same artifact.</p></div><div class="section"><h3>Aliases<a name="Aliases"></a></h3><p>As you may have already realized, key names tend to become quite long since sometimes we concatenate the name of classes, methods, annotations, and annotation properties. Therefore we need a more convenient way to refer to class and annotation names. </p><p>Our resource bundle loading procedures address this problem by allowing keys to use aliases. Let us take a look at an example to see how to use this feature. The first example above can be rewritten as:</p><div class="source"><pre>alias.status = org.hyphenType.tests.exit.MyExitStatus
${status}.A = x 
${status}.A.message = y 
${status}.B = z
${status}.B.message = w </pre></div><p>Key names starting with &quot;alias.&quot; are treated in a special way. They declare an alias to be used in other key names. In the example above, the first line is defining the alias &quot;status&quot;, which is used on the four next lines.</p><p>As you can see in the example above, using an alias is rather simple. Once the alias X was defined using the key &quot;alias.X&quot;, you can use this alias anywhere in key names using the string &quot;${X}&quot;. You can also use more than one alias at the same time, which is quite useful when declaring the application of an annotation:</p><div class="source"><pre>alias.a = org.hyphenType.tests.exit.MyExitStatus
alias.b = bla.bla.bla
${a}@${b} = x</pre></div><p>The configuration file above is much simpler to read and to maintain. If we change the name of the class we don't need to replace text in several lines of the resource bundle file.</p></div><div class="section"><h3>Arrays<a name="Arrays"></a></h3><p>Array values can be declared using two distinct syntaxes. Each syntax fits a specific situation.</p><div class="section"><h4>One line declaration<a name="One_line_declaration"></a></h4><p>Declaration of an array as a single line follows the format of arrays when they are printed using the toString() method. This kind of declaration is good when you are specifying the value of an array of primitives or string.</p><div class="source"><pre>myStringArray = [Mon, Tue, Wed, Thu, Fri, Sat]
myIntArray = [2, 5, 7, 11, 13]</pre></div></div><div class="section"><h4>Multiple lines declaration<a name="Multiple_lines_declaration"></a></h4><p>You can also declare arrays using multiple lines. Each line will refer to a single cell in the array.</p><div class="source"><pre>myIntArray[0] = 2
myIntArray[1] = 5
myIntArray[2] = 7
myIntArray[3] = 11
myIntArray[4] = 13</pre></div><p>This syntax is particularly suitable when you want to create binary trees of annotations, as in the following example:</p><div class="source"><pre>node[0].name = animal
node[0].node[0].name = mammal
node[0].node[0].node[0].name = wolf
node[0].node[0].node[1].name = rabbit
node[0].node[1].name = reptile
node[0].node[1].node[0].name = snake
node[0].node[1].node[1].name = lizard
node[0].node[2].name = fish
node[0].node[2].node[0].name = salmon
node[0].node[2].node[1].name = shark
node[1].name = vegetable</pre></div></div></div></div><div class="section"><h2>Multiple languages<a name="Multiple_languages"></a></h2><p>The resource bundles are read using the Java standard for internationalization. More information can be found here: <a href="#Java_Internationalization:_Localization_with_ResourceBundles">http://java.sun.com/developer/technicalArticles/Intl/ResourceBundles/</a>.</p><p>For instance, for an options interface called x.y.z.MyOptInterface, you can overwrite the hard coded values in the source code using the file /x/y/z/MyOptInterface.properties where / is the root of your class path. If you want to support the Japanese language, you need a second file called /x/y/z/MyOptInterface_ja_JP.properties.</p><p>If you chose to set the value of the variable resourceBundlesLocation in the @ArgumentsObject annotation, resource bundle files for additional locales should be similar to the one in the resourceBundlesLocation variable. For example, if resourceBundlesLocation=&quot;/a/b/c/D&quot;, then the default resource bundle should be /a/b/c/D.properties and support for the Japanese language should be added in the file /a/b/c/D_ja_JP.properties</p></div><div class="section"><h2>RBGenerator<a name="RBGenerator"></a></h2><p>Writing a complete configuration for an options interface can be a tedious task. We provide the RBGenerator tool to make this task easier.</p><p><a href="#a.siteapidocsorghyphenTypedocumentationrbgeneratorRBGenerator.html">org.hyphenType.documentation.rbgenerator.RBGenerator</a> is a simple command line application that generates a template for an options interface. When calling the RBGenerator, one needs to pass the full name of the options interface. The RBGenerator analyzes the options interface and outputs a template of the configuration.</p><div class="section"><h3>Calling the RBGenerator<a name="Calling_the_RBGenerator"></a></h3><p>The hyphenType JAR is set to execute the RBGenerator as the default main class. So calling the RBGenerator tool is done by simply running the org.hyphenType.documentation.rbgenerator.RBGenerator class in the distribution JAR. The following shows how to it. Please note that you may have a different version of the hyphenType distribution, so the JAR file name can be something other than &quot;hyphenType-0.1.jar&quot; depending on the version.</p><div class="source"><pre>java -classpath hyphenType-0.1.jar org.hyphenType.documentation.rbgenerator.RBGenerator</pre></div><p>And this is the output you should get:</p><div class="source"><pre>No options interface. Giving up. Use --help for more details.</pre></div><p>This error means that RBGenerator expects the user to provide the name of the options interface. Also, note that the RBGenerator should be able to reach the provided options interface. Therefore you need to add your own JAR to the classpath when you call the RBGenerator. As the message states, in order to get details on how to call the RBGenerator, you should provide the &quot;--help&quot; argument. Here is how to provide this argument:</p><div class="source"><pre>java -classpath hyphenType-0.1.jar org.hyphenType.documentation.rbgenerator.RBGenerator --help</pre></div><p>And this is the output you should get:</p><div class="source"><pre>usage: program [options] [optionsClass] [supportedLanguages...] 

Creates a resource bundle based on a options interface.

Arguments

  optionsClass      The options class that will be analyzed.
  supportedLanguages
                    The language variants that will be supported. If no variant 
                    is provided, it will only write a template for the default 
                    variant. This argument is ignored if the -f, --file option 
                    is not used.

Options

  -f=fileName, --filename=fileName
                    The name of the file to write the output to. If more than 
                    one language is supported, this name will be used as the 
                    basis to create the set of files. If no file is given, this 
                    tool will output the contents of the resource bundle to the 
                    standard output.
  -h, --help        Shows this help message.</pre></div><p>Assuming that your options interface is called a.b.c.MyOptions and that this interface is available in a JAR file called MyApp.jar, a correct execution of the RBGenerator will look like the following:</p><div class="source"><pre>java -classpath MyApp.jar:hyphenType-0.1.jar org.hyphenType.documentation.rbgenerator.RBGenerator a.b.c.MyOptions</pre></div><p>As you did not provide a </p></div><div class="section"><h3>&quot;Hidden&quot; keys<a name="aHidden_keys"></a></h3><p>Besides the obvious properties (the ones that can be printed as part of the documentation, for instance), the RBGenerator also outputs the keys for internal error messages, such as the one that controls how org.hyphenType.lexerparser.exceptions.MandatoryMapValueNotFoundException outputs error messages.</p><p>These properties are hard to remember since they are spread across the hyphenType API. This is actually one of the key benefits of using the RBGenerator instead of trying to search for all necessary keys manually.</p></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">Copyright &#169;                   2013.
          All Rights Reserved.      
        
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
